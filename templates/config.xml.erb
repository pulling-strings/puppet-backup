<configuration version="2">
  <% @repos.each_pair do |repo, props| -%>
    <repository id="<%=repo%>" directory="<%=props['directory']%>" ro="<%=props['ro']%>" ignorePerms="false">
    <% props['nodes'].each do |id| -%>
      <node id="<%=id%>"></node>
    <% end -%>
    <versioning></versioning>
  </repository>
  <% end -%>

  <% @nodes.each_pair do |id, props|-%>
  <node id="<%=id%>" name="<%=props['name']%>">
    <address><%=props['address']%></address>
  </node>
  <% end -%>

  <gui enabled="true" tls="true">
    <address>0.0.0.0:8080</address>
  </gui>
  <options>
    <listenAddress>0.0.0.0:22000</listenAddress>
    <globalAnnounceServer>announce.syncthing.net:22025</globalAnnounceServer>
    <globalAnnounceEnabled>true</globalAnnounceEnabled>
    <localAnnounceEnabled>true</localAnnounceEnabled>
    <localAnnouncePort>21025</localAnnouncePort>
    <parallelRequests>16</parallelRequests>
    <maxSendKbps>0</maxSendKbps>
    <rescanIntervalS>60</rescanIntervalS>
    <reconnectionIntervalS>60</reconnectionIntervalS>
    <maxChangeKbps>10000</maxChangeKbps>
    <startBrowser>true</startBrowser>
    <upnpEnabled>false</upnpEnabled>
  </options>
</configuration>
